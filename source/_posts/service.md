---
title: æ‰‹æŠŠæ‰‹é˜¿é‡Œäº‘ä¹°ä¸ªæœåŠ¡å™¨å¹¶ä¸”æ­å»ºç¯å¢ƒ
date: 2019-06-15
---

 ğŸ’ƒ ğŸ’ƒç®—æ˜¯ä¸ªå°æ€»ç»“

### ä¸Šé˜¿é‡Œäº‘ä¹°ä¸ªæœåŠ¡å™¨è¿™ä¸ªä¸å°±ç”¨æˆ‘æ¥è¯´äº†å§

 å°é¡¹ç›®çš„è¯ä¹°ä¸ª1æ ¸1gçš„linuxå°±è¡Œï¼Œæ¯•ç«Ÿä¹Ÿæ²¡æ‰“ç®—ç©ä»€ä¹ˆå¤§å®¶ä¼™ï¼Œè¿™è¾¹ä¹°å®Œä¹‹åè¿›ä¸ªäººä¸­å¿ƒä¼šå‘ç°æˆ‘ä»¬çš„æœåŠ¡å™¨å·²ç»æ­£åœ¨è·‘äº†

 ![f](../imgs/service-3.jpg)

 ç‚¹å‡»è¿œç¨‹è¿æ¥ï¼Œä¼šå‡ºç°ä¸€ä¸ªæ–°çš„tabï¼Œå¸¦ç€ä¸€ä¸ªé»‘è‰²çš„æ§åˆ¶å°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œé¢è¿›è¡Œä¸€äº›æœåŠ¡å™¨çš„æ“ä½œã€‚
 ä½†æ˜¯æ¯ä¸€æ¬¡éƒ½è¦å¼€ç½‘é¡µæ‰èƒ½æ“ä½œæœåŠ¡å™¨æ€ªéº»çƒ¦ï¼Œå¯ä»¥ç›´æ¥ç”¨æœ¬åœ°çš„bashç›´è¿æœåŠ¡å™¨è¿›è¡Œç›¸å…³æ“ä½œã€‚
 å¯ä»¥ç›´æ¥ä½¿ç”¨ssh root@ipç›´æ¥ä»bashè¿ä¸ŠæœåŠ¡å™¨ï¼Œè¾“å…¥å¯†ç å°±è¡Œã€‚å¦‚æœè§‰å¾—æ¯æ¬¡è¾“å¯†ç ä¹Ÿéº»çƒ¦çš„è¯å¯ä¸€æ­¥åˆ°ä½ï¼š

 `cat ~/.ssh/id_rsa.pub |ssh root@ip 'mkdir -p .ssh && cat >> .ssh/authorized_keys'`
 çœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„äººæˆ‘é»˜è®¤ä½ å·²ç»æœ‰äº†è‡ªå·±çš„å…¬é’¥å’Œç§é’¥ã€‚ğŸ¤”ğŸ¤”

### ä¸ŠæœåŠ¡å™¨ä¸‹æœ€æ–°çš„nodeåŒ…

 `wget https://npm.taobao.org/mirrors/node/v10.16.0/node-v10.16.0-linux-x64.tar.xz`
 æ˜¯ä¸ªxzåç¼€çš„åŒ…ï¼Œéœ€è¦è§£å‹ä¸¤æ¬¡ï¼š
 `xz -d node-v10.16.0-linux-x64.tar.xz`
 `tar -xvf node-v10.16.0-linux-x64.tar`

 ä¹‹åå›åˆ°æ ¹ç›®å½•å»ºç«‹è½¯é“¾
 `ln -s /node/node-v10.16.0-linux-x64/bin/node /usr/bin/node`
 `ln -s /node/node-v10.16.0-linux-x64/bin/npm /usr/bin/npm`
 å¼„å®Œä¹‹ååˆ†åˆ«è¾“å‡ºä¸€ä¸‹ç‰ˆæœ¬
 `node -v    npm -v`
 æœŸæœ›å¦‚ä¸‹ï¼š
 ![f](../imgs/service-2.png)
 ğŸ’ƒ nodeç¯å¢ƒæ­å»ºok

### ä¸Šä¼ é¡¹ç›®
æŠŠé¡¹ç›®æ‰“æˆä¸€ä¸ªzipåŒ…ä¹‹åå‘é€åˆ°æœåŠ¡å™¨
`scp xxx root@ip:/fileFolder`

å¼€å§‹å®ˆæŠ¤è¿›ç¨‹
`npm install pm2 -g`
`pm2 start xxx --watch`
åŒæ—¶å¯ä»¥`pm2 list`åˆ—ä¸€ä¸‹ç›®å‰æ­£åœ¨å®ˆæŠ¤çš„è¿›ç¨‹
![f](../imgs/service-4.jpg)

è¿˜éœ€é…ç½®nginxï¼š
1. æ–°æœåŠ¡å™¨æˆ‘ä»¬å…ˆæ›´æ–°ä¸€ä¸‹æºï¼Œ`apt-get update`
2. å®‰è£…PCREåº“ï¼Œzlibåº“ï¼Œssl `sudo apt-get install libpcre3 libpcre3-dev libpcrecpp0v5 libssl-dev zlib1g-dev`
3. cdåˆ°ä½ æƒ³è¦çš„ç›®å½•
4. é€‰ä¸€ä¸ªnginxç‰ˆæœ¬ `wget http://nginx.org/download/nginx-1.xx.x.tar.gz`
5. è§£å‹ `tar -zxvf nginx-1.13.1.tar.gz`
6. cdè¿›ç›®å½•ï¼Œ `./configure`
7. `make && make install`
8. å¯åŠ¨ngxin

ä¸€èˆ¬è¿™ä¸ªæ—¶å€™ç›´æ¥è®¿é—®æœåŠ¡å™¨ipï¼Œçœ‹åˆ°nginxé»˜è®¤é¡µé¢å°±ok
![f](../imgs/service-5.jpg)
å¯ä»¥`nginx -t`æŸ¥çœ‹ä¸€ä¸‹é…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œ ä¸è¿‡ä¸€èˆ¬éƒ½æ˜¯åœ¨`/usr/local/nginx/conf`ä¸‹é¢ï¼Œæ‰¾åˆ°`nginx.conf`ï¼Œæ”¹ä¸€ä¸‹é…ç½®å°±è¡Œï¼Œå…·ä½“é…ç½®è§„åˆ™ç™¾åº¦å³å¯

å¦‚æœå‰ç«¯æ˜¯ä¸ªvueé¡¹ç›®çš„è¯ï¼Œ`npm run build`ä¹‹åæŠŠdistä¸‹çš„staticå’Œindexç›´æ¥ä¸¢åˆ°æœåŠ¡å™¨ä¸Šï¼Œnginxé…ç½®ä¸€ä¸‹å…¥å£çš„è½¬å‘ï¼Œé»˜è®¤ç›‘å¬80
```
location / {
  root /vue-cloud/dist;
  try_files $uri $uri /index.html last
  index index.html index.html;
}
```
å¦‚æœæƒ³ç›‘å¬å…¶ä»–çš„ç«¯å£å¦è¡Œé…ç½®ã€‚
